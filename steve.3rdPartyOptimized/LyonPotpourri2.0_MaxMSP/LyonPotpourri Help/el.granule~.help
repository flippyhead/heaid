max v2;#N vpatcher 156 251 798 757;#P origin -7 -45;#P window setfont "Sans Serif" 9.;#P window linecount 1;#P comment 291 79 83 196617 explain scale;#B color 9;#P comment 140 164 113 196617 dbl-click to see waves:;#P hidden newex 415 233 30 196617 t b b;#P hidden newex 415 211 55 196617 delay 100;#P hidden newex 378 66 48 196617 loadbang;#P hidden newex 4 229 66 196617 loadmess 64;#P message 276 382 275 196617 adsyn 1. 0.5 0.333 0.25 0.2 0.167 0.143 0.125;#P message 336 254 48 196617 pluckenv;#P user meter~ 208 240 221 301 100 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P user meter~ 191 240 204 301 100 0 168 0 103 103 103 255 153 0 255 0 0 217 217 0 153 186 0 12 3 3 3 3;#P message 321 405 275 196617 adsyn 1. 0 -0.111 0 0.04 0 -0.02 0 0.012 0 -0.008;#P user gswitch2 18 104 39 32 0 0;#N vpatcher 505 44 1009 546;#P window setfont "Sans Serif" 9.;#N vpatcher 83 302 671 842;#P window setfont "Sans Serif" 9.;#P message 112 424 305 196617 setscale 220 247.5 278.4375 293.333344 330 440 495 556.875 586.666687 660 880 990 1113.75 1173.333374 1320;#P message 112 314 365 196617 setscale 55 60.724922 67.045753 74.024513 81.729683 90.236893 99.629601 110. 121.45 134.091507 148.049026 163.459366 180.473785 199.259201 220. 242.9 268.183014 296.098053 326.918732 360.947571 398.518402 440. 485.8 536.366028 592.196106 653.837463 721.895142 797.036804 880. 971.598755 1072.732056 1184.392212 1307.674927 1443.790283 1594.073608;#P message 112 139 365 196617 setscale 55 58.27047 61.735413 65.406395 69.295654 73.416191 77.781746 82.406891 87.30706 92.498604 97.998856 103.826172 110. 116.540939 123.470825 130.81279 138.591309 146.832382 155.563492 164.813782 174.61412 184.997208 195.997711 207.652344 220. 233.081879 246.94165 261.62558 277.182617 293.664764 311.126984 329.627563 349.228241 369.994415 391.995422 415.304688 440. 466.163757 493.883301 523.25116 554.365234 587.329529 622.253967 659.255127 698.456482 739.988831 783.990845 830.609375 880. 932.327515 987.766602 1046.502319 1108.730469 1174.659058 1244.507935 1318.510254 1396.912964 1479.977661 1567.981689 1661.21875;#P outlet 34 498 15 0;#P message 34 65 228 196617 setscale 440 495 556.875 586.666687 660 742.5 835.3125 880 990 1113.75 1173.333374 1320 1485 1670.625;#P comment 35 46 120 196617 two octave Pythagorean;#P comment 112 121 113 196617 equal-tempered 12 tone;#P comment 112 295 110 196617 equal-tempered 7 tone;#P comment 112 404 55 196617 pentatonic;#P connect 8 0 5 0;#P connect 7 0 5 0;#P connect 6 0 5 0;#P connect 4 0 5 0;#P pop;#P newobj 37 302 74 196617 p more_scales;#P flonum 309 321 37 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden message 138 229 14 196617 1;#P toggle 76 389 15 0;#P message 76 410 54 196617 steady \$1;#P message 15 174 235 196617 grist 3 1000. 100 1500 0.1 0.9 0.1 1 1000 8000;#P message 244 408 128 196617 setbuf waveform envelope;#N vpatcher 710 578 1015 939;#P origin 0 -8;#P window setfont "Sans Serif" 9.;#P hidden newex 96 230 45 196617 loadbang;#P comment 53 197 115 196617 maximum grain duration;#P comment 53 162 95 196617 maximum amplitude;#P comment 53 127 93 196617 right pan boundary;#P comment 53 90 155 196617 maximum frequency (spray only);#P button 5 254 15 0;#P hidden message 190 21 213 196617 130 1000. 500. 1000. 0. 1. 0.1 1. 100. 200.;#P hidden newex 190 41 131 196617 unpack i f f f f f f f f f;#P hidden newex 560 83 27 196617 t b f;#P flonum 5 197 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 531 83 27 196617 t b f;#P flonum 5 179 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 502 83 27 196617 t b f;#P flonum 5 161 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 472 82 27 196617 t b f;#P flonum 5 143 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 443 82 27 196617 t b f;#P flonum 5 125 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 413 82 27 196617 t b f;#P flonum 5 108 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 383 81 27 196617 t b f;#P flonum 5 90 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 287 48 27 196617 t b f;#P flonum 5 72 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P hidden newex 257 48 27 196617 t b f;#P hidden newex 270 138 342 196617 pack i f f f f f f f f f;#P outlet 5 306 15 0;#P flonum 5 53 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P number 5 35 45 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 5 275 255 196617 grist 130 1000. 500. 1000. 0. 1. 0.1 1. 100. 200.;#P hidden newex 120 295 27 196617 t b l;#P hidden newex 270 191 85 196617 prepend set grist;#P comment 24 256 138 196617 bang to initialize parameters;#P comment 53 37 100 196617 events per cloud;#P comment 53 54 70 196617 event horizon;#P comment 53 72 155 196617 minimum frequency (spray only);#P comment 53 108 85 196617 left pan boundary;#P comment 53 144 95 196617 minimum amplitude;#P comment 53 180 115 196617 minimum grain duration;#P user panel 0 20 273 207;#X brgb 171 219 242;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P user panel 0 226 273 103;#X brgb 248 199 220;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P hidden connect 33 0 12 0;#P hidden connect 33 1 13 0;#P hidden connect 33 2 17 0;#P hidden connect 33 3 19 0;#P hidden connect 33 4 21 0;#P hidden connect 33 5 23 0;#P hidden connect 33 6 25 0;#P hidden connect 33 7 27 0;#P hidden connect 33 8 29 0;#P hidden connect 33 9 31 0;#P hidden connect 40 0 35 0;#P connect 35 0 11 0;#P hidden connect 10 0 11 0;#P hidden connect 10 1 11 0;#P connect 11 0 14 0;#P hidden connect 9 0 10 0;#P hidden connect 35 0 34 0;#P hidden connect 34 0 33 0;#P hidden connect 13 0 16 0;#P hidden connect 16 0 15 0;#P hidden connect 12 0 15 0;#P hidden connect 18 0 15 0;#P hidden connect 20 0 15 0;#P hidden connect 24 0 15 0;#P hidden connect 22 0 15 0;#P hidden connect 28 0 15 0;#P hidden connect 26 0 15 0;#P hidden connect 32 0 15 0;#P hidden connect 30 0 15 0;#P hidden connect 15 0 9 0;#P hidden connect 17 0 18 0;#P hidden connect 16 1 15 1;#P hidden connect 18 1 15 2;#P hidden connect 20 1 15 3;#P hidden connect 19 0 20 0;#P hidden connect 21 0 22 0;#P hidden connect 22 1 15 4;#P hidden connect 23 0 24 0;#P hidden connect 24 1 15 5;#P hidden connect 25 0 26 0;#P hidden connect 26 1 15 6;#P hidden connect 27 0 28 0;#P hidden connect 28 1 15 7;#P hidden connect 29 0 30 0;#P hidden connect 30 1 15 8;#P hidden connect 31 0 32 0;#P hidden connect 32 1 15 9;#P pop;#P newobj 156 339 75 196617 p independence;#P newex 309 298 45 196617 * 0.001;#P flonum 309 278 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 309 343 62 196617 pitchdev \$1;#P flonum 138 270 35 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 138 293 68 196617 transpose \$1;#P message 15 100 202 196617 grist 333 1000 50 5000 0 1 0.05 1 30 60;#P number 15 251 36 9 0 0 0 3 0 0 0 221 221 221 222 222 222 0 0 0;#P message 15 272 54 196617 events \$1;#P message 15 119 214 196617 grist 250 1000 100 300 0.1 0.9 0.1 1 40 60;#P message 15 156 223 196617 grist 10 1000. 1200 1500 0.1 0.9 0.1 1 20 50;#P message 15 138 215 196617 grist 30 1000. 400 500 0.1 0.9 0.1 1 50 600;#P outlet 15 451 15 0;#P comment 13 223 90 196617 control number of events directly;#P comment 251 218 209 196617 Note: pitchspray ignores the frequency boundaries and always uses its entire scale.;#P comment 355 316 107 196617 detune factor (only for pitchspray);#P comment 244 392 172 196617 you can set the buffers by message;#P comment 137 245 157 196617 adjust pitch range (for both spray and pitchspray);#P comment 14 83 165 196617 grain parameters entered as a list:;#P comment 154 321 145 196617 independent parameter control;#P comment 321 192 100 196617 maximum grain size;#P window setfont "Lucida Grande" 12.;#P comment 321 44 111 67108876 Grist Parameters:;#P window setfont "Sans Serif" 9.;#P comment 321 63 131 196617 number of events per cloud;#P comment 321 78 70 196617 event horizon;#P comment 321 93 75 196617 low frequency;#P comment 321 107 100 196617 high frequency;#P comment 321 121 100 196617 left pan boundary;#P comment 321 135 100 196617 right pan boundary;#P comment 321 149 100 196617 minimum amplitude;#P comment 321 164 100 196617 maximum amplitude;#P comment 321 178 100 196617 minimum grain size;#P comment 91 389 122 196617 toggle for steady rhythm;#P user panel 312 36 147 179;#X brgb 200 192 130;#X frgb 0 0 0;#X border 0;#X rounded 0;#X shadow 0;#X done;#P connect 25 0 24 0;#P hidden fasten 26 0 20 0 20 289 20 289;#P connect 24 0 20 0;#P hidden fasten 23 0 20 0 20 299 20 299;#P hidden fasten 22 0 20 0 20 317 20 317;#P hidden fasten 21 0 20 0 20 308 20 308;#P fasten 27 0 20 0 143 333 20 333;#P fasten 29 0 20 0 314 381 20 381;#P fasten 33 0 20 0 249 443 20 443;#P fasten 32 0 20 0 161 364 20 364;#P hidden fasten 34 0 20 0 20 326 20 326;#P fasten 35 0 20 0 81 438 20 438;#P fasten 39 0 20 0 42 326 20 326;#P connect 36 0 35 0;#P hidden connect 37 0 28 0;#P connect 28 0 27 0;#P connect 30 0 31 0;#P connect 31 0 38 0;#P connect 38 0 29 0;#P pop;#P newobj 157 100 94 196617 p more_good_stuff;#P toggle 47 51 15 0;#P newex 47 74 63 196617 metro 1000;#P window linecount 4;#P message 287 96 314 196617 setscale 110 123.75 139.21875 146.666672 165 185.625 208.828125 220 247.5 278.4375 293.333344 330 371.25 417.65625 440 495 556.875 586.666687 660 742.5 835.3125 880 990 1113.75 1173.333374 1320 1485 1670.625 1760 1980;#P window linecount 1;#P message 18 188 55 196617 pitchspray;#P message 276 236 45 196617 gaussian;#P user gain~ 168 209 15 27 158 0 1.071519 7.94321 10.;#P user gain~ 130 209 15 27 158 0 1.071519 7.94321 10.;#P message 47 154 35 196617 spray;#P user ezdac~ 130 275 174 308 0;#P message 287 405 29 196617 sine;#P newex 276 460 84 196617 peek~ waveform;#P newex 276 435 109 196617 js el_gwaves.js 8192;#P message 324 236 29 196617 rcos;#P newex 324 341 75 196617 peek~ envelope;#P newex 324 311 114 196617 js el_windows.js 8192;#P newex 465 348 121 196617 buffer~ envelope 185.76;#P newex 465 325 128 196617 buffer~ waveform 185.76;#P newex 130 182 151 196617 el.granule~ waveform envelope;#B color 14;#P window setfont "Sans Serif" 12.;#P window linecount 6;#P comment 21 321 246 196620 granule~ does stereo granular synthesis using a wavetable and envelope \, each stored in a buffer. Hundreds of grains per second can be synthesized on most modern computers.;#P window setfont "Sans Serif" 9.;#P window linecount 3;#P comment 58 104 81 196617 click to toggle "spray" or "pitchspray";#P window linecount 1;#P comment 32 431 170 196617 http://www.sarc.qub.ac.uk/~elyon;#P user panel 22 427 193 21;#X brgb 76 239 101;#X frgb 0 0 0;#X border 1;#X rounded 2;#X shadow 3;#X done;#P comment 287 186 223 196617 arguments: waveform_buffer \, envelope_buffer;#P comment 276 221 83 196617 explain envelope;#B color 9;#P comment 276 364 90 196617 explain waveform;#B color 9;#P user hint 276 363 369 376 "The waveform is the basic timbre for all grains in a granule~ object. Samples from soundfiles also work fine but must be mono." 100 100 0 65535 65535 52428 9 3 0 1 0 0 0;#P comment 466 305 93 196617 explain buffer size;#B color 9;#P user hint 465 302 559 321 "Both buffers are 8192 samples in length at 44.1KHz. This length is not required by granule~ but makes it convenient to generate waveforms from JavaScript." 100 100 0 65535 65535 52428 9 3 0 1 0 0 0;#P comment 64 52 179 196617 <- turn this on to trigger grain clouds;#P user hint 288 77 351 94 "A scale is just a list of frequency values. This one is diatonic Pythagorean. The pitchspray message uses whatever scale you set." 1000 100 0 65535 65535 52428 9 3 0 1 0 0 0;#P window linecount 3;#P comment 343 272 143 196617 This script generates several useful envelopes. Open it to see more possibilities.;#P user ubutton 32 428 166 18 0 0;#P window linecount 2;#P hidden message 22 450 235 196617 \; max launchbrowser www.sarc.qub.ac.uk/~elyon;#P user hint 276 220 367 234 "The envelope is applied to each individual grain. The choice of envelope can have a dramatic impact on the textural quality." 100 100 0 65535 65535 52428 9 3 0 1 0 0 0;#P fasten 35 0 30 0 23 181 23 181;#P hidden connect 2 0 1 0;#P connect 33 0 32 0;#P connect 32 0 35 1;#P connect 35 1 26 0;#P fasten 26 0 16 0 52 173 135 173;#P fasten 30 0 16 0 23 220 123 220 123 179 135 179;#P fasten 31 0 16 0 292 156 135 156;#P fasten 34 0 16 0 162 149 135 149;#P hidden connect 41 0 27 0;#P connect 16 0 27 0;#P connect 27 0 25 0;#P fasten 28 0 25 1 173 266 169 266;#P fasten 16 1 28 0 276 204 173 204;#P hidden connect 27 1 28 0;#P hidden connect 27 0 37 0;#P hidden connect 28 0 38 0;#P hidden connect 44 1 40 0;#P fasten 24 0 22 0 292 427 281 427;#P fasten 36 0 22 0 326 427 281 427;#P connect 40 0 22 0;#P connect 22 0 23 0;#P hidden connect 42 0 31 0;#P fasten 22 1 23 1 380 456 318 456;#P hidden connect 44 0 21 0;#P fasten 39 0 19 0 341 290 329 290;#P fasten 29 0 19 0 281 281 329 281;#P connect 21 0 19 0;#P connect 19 0 20 0;#P fasten 19 1 20 1 433 334 361 334;#P hidden connect 42 0 43 0;#P hidden connect 43 0 44 0;#P pop;